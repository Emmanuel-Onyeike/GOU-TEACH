 <!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GoTeach | Student Dashboard</title>
  <link rel="icon" type="image/png" href="image.png" />
  <!-- Tailwind + Google Fonts -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ['Inter', 'sans-serif'] },
          colors: {
            navy: '#0a1a2e',
            deep: '#0f1b2d',
            primary: '#1e40af',
            accent: '#3b82f6',
            glass: 'rgba(255, 255, 255, 0.08)',
            border: 'rgba(255, 255, 255, 0.12)',
            text: '#e2e8f0',
            muted: '#94a3b8',
          }
        }
      }
    }
  </script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
        integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    :root {
      --glass: rgba(255, 255, 255, 0.08);
      --border: rgba(255, 255, 255, 0.12);
      --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    }
    body { background:#0a1a2e; color:#e2e8f0; font-family:'Inter',sans-serif; min-height:100vh; }
    .glass { background:var(--glass); backdrop-filter:blur(16px); -webkit-backdrop-filter:blur(16px);
      border:1px solid var(--border); box-shadow:var(--shadow); border-radius:1rem;
      transition:all .3s cubic-bezier(.4,0,.2,1); }
    .glass:hover { background:rgba(255,255,255,.12); transform:translateY(-4px);
      box-shadow:0 20px 40px rgba(30,64,175,.25); border-color:rgba(59,130,246,.3); }
    .sidebar-link { @apply flex items-center gap-3 px-5 py-3.5 rounded-xl transition-all duration-300 text-muted; }
    .sidebar-link:hover,.sidebar-link.active { @apply bg-accent/10 text-white border-l-4 border-accent; }
    .sidebar-link i { @apply w-5 text-center; }
    .mobile-menu { transform:translateX(100%); transition:transform .4s cubic-bezier(.4,0,.2,1); }
    .mobile-menu.open { transform:translateX(0); }
    .chart-container { position:relative; height:320px; }
    ::-webkit-scrollbar { width:8px; }
    ::-webkit-scrollbar-track { background:transparent; }
    ::-webkit-scrollbar-thumb { background:rgba(255,255,255,.2); border-radius:4px; }
    .notice-pulse { animation:noticePulse 1.8s infinite; }
    @keyframes noticePulse { 0%,100%{opacity:.8;transform:scale(1)} 50%{opacity:1;transform:scale(1.03)} }
    .custom-scrollbar::-webkit-scrollbar { width:6px; }
    0.3s cubic-bezier(0.4, 0, 0.2, 1); }
    .custom-scrollbar::-webkit-scrollbar-thumb { background:linear-gradient(to bottom,#3b82f6,#8b5cf6); border-radius:8px; }
    @keyframes fadeIn { from{opacity:0;transform:scale(.9)} to{opacity:1;transform:scale(1)} }
    .animate-fadeIn { animation:fadeIn .25s ease-out; }
    .chat-bubble { max-width:80%; padding:10px 14px; border-radius:12px; position:relative;
      word-wrap:break-word; animation:fadeInUp .3s ease-out; }
    .chat-bubble.me { background:linear-gradient(to right,#2563eb,#4f46e5); color:white;
      margin-left:auto; border-bottom-right-radius:4px; }
    .chat-bubble.other { background:rgba(255,255,255,.08); color:#e5e7eb;
      margin-right:auto; border-bottom-left-radius:4px; }
    .chat-time { font-size:.7rem; color:#9ca3af; text-align:right; margin-top:4px; }
    .message-menu-btn { position:absolute; right:6px; top:4px; color:#d1d5db; cursor:pointer;
      font-size:1.1rem; padding:4px; transition:color .2s,transform .2s; }
    .message-menu-btn:hover { color:#fff; transform:scale(1.1); }
    @keyframes fadeInUp { from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }
  </style>
</head>
<body class="text-text">

  <!-- Mobile Overlay -->
  <div id="mobileOverlay" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-40 hidden"></div>

  <!-- Mobile Right-Slide Menu -->
  <aside id="mobileMenu"
         class="mobile-menu fixed top-0 right-0 h-full w-72 z-50 bg-gradient-to-br from-slate-900/80 via-slate-800/80 to-slate-900/80 backdrop-blur-xl border-l border-white/10 shadow-2xl p-6 rounded-l-3xl">
    <div class="flex justify-between items-center mb-8">
      <h2 class="text-2xl font-extrabold text-white tracking-wide">Student Menu</h2>
      <button id="closeMobileMenu" class="text-white/60 hover:text-white transition text-xl">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <nav class="space-y-3">
      <a href="#dashboard" class="sidebar-link active"><i class="fas fa-home"></i> Dashboard</a>
      <a href="#courses" class="sidebar-link"><i class="fas fa-book-open"></i> Courses</a>
      <a href="#attendance" class="sidebar-link"><i class="fas fa-clipboard-check"></i> Attendance</a>
      <a href="#activity" class="sidebar-link"><i class="fas fa-tasks"></i> Activity</a>
      <a href="#analytics" class="sidebar-link"><i class="fas fa-chart-line"></i> Analytics</a>
      <a href="#premium" class="sidebar-link"><i class="fas fa-crown"></i> Premium</a>
      <a href="#chat" class="sidebar-link"><i class="fas fa-comments"></i> Chat Room</a>
      <a href="#profile" class="sidebar-link"><i class="fas fa-user"></i> Profile</a>
    </nav>
    <button id="mobileLogout"
            class="mt-10 w-full bg-gradient-to-r from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 text-white font-semibold py-3 rounded-xl flex items-center justify-center gap-2 transition-all shadow-lg shadow-red-900/30">
      <i class="fas fa-sign-out-alt"></i> Logout
    </button>
  </aside>

  <!-- Desktop Sidebar (Left) -->
 <aside
  class="hidden lg:fixed lg:inset-y-0 lg:left-0 lg:w-72 bg-gradient-to-br from-slate-900/80 via-slate-800/70 to-slate-900/80 backdrop-blur-xl lg:flex lg:flex-col p-6 border-r border-white/10 shadow-xl rounded-r-3xl">

  <!-- Logo & Title -->
  <div class="flex items-center gap-3 mb-10">
    <div class="w-12 h-12 rounded-2xl bg-gradient-to-br from-indigo-600 to-purple-500 flex items-center justify-center shadow-lg shadow-indigo-500/30">
      <i class="fas fa-graduation-cap text-white text-xl"></i>
    </div>
    <div>
      <h1 class="text-xl font-extrabold text-white tracking-wide">GoTeach</h1>
      <p class="text-xs text-white/50">Godfrey Okoye University</p>
    </div>
  </div>

  <!-- Navigation -->
  <nav class="flex-1 space-y-2">
    <a href="#dashboard"
       class="sidebar-link active flex items-center gap-3 px-4 py-3 rounded-xl text-white/90 bg-white/10 hover:bg-white/15 transition-all duration-200">
      <i class="fas fa-home text-white/70"></i>
      <span class="font-medium">Dashboard</span>
    </a>

    <a href="#courses"
       class="sidebar-link flex items-center gap-3 px-4 py-3 rounded-xl text-white/80 hover:text-white hover:bg-white/10 transition-all duration-200">
      <i class="fas fa-book-open text-blue-400"></i>
      <span class="font-medium">Courses</span>
    </a>

    <a href="#attendance"
       class="sidebar-link flex items-center gap-3 px-4 py-3 rounded-xl text-white/80 hover:text-white hover:bg-white/10 transition-all duration-200">
      <i class="fas fa-clipboard-check text-green-400"></i>
      <span class="font-medium">Attendance</span>
    </a>

    <a href="#activity"
       class="sidebar-link flex items-center gap-3 px-4 py-3 rounded-xl text-white/80 hover:text-white hover:bg-white/10 transition-all duration-200">
      <i class="fas fa-tasks text-orange-400"></i>
      <span class="font-medium">Activity</span>
    </a>

    <a href="#analytics"
       class="sidebar-link flex items-center gap-3 px-4 py-3 rounded-xl text-white/80 hover:text-white hover:bg-white/10 transition-all duration-200">
      <i class="fas fa-chart-line text-cyan-400"></i>
      <span class="font-medium">Analytics</span>
    </a>

    <a href="#premium"
       class="sidebar-link flex items-center gap-3 px-4 py-3 rounded-xl text-white/80 hover:text-white hover:bg-white/10 transition-all duration-200">
      <i class="fas fa-crown text-yellow-400"></i>
      <span class="font-medium">Premium</span>
    </a>

    <a href="#chat"
       class="sidebar-link flex items-center gap-3 px-4 py-3 rounded-xl text-white/80 hover:text-white hover:bg-white/10 transition-all duration-200">
      <i class="fas fa-comments text-pink-400"></i>
      <span class="font-medium">Chat Room</span>
    </a>

    <a href="#profile"
       class="sidebar-link flex items-center gap-3 px-4 py-3 rounded-xl text-white/80 hover:text-white hover:bg-white/10 transition-all duration-200">
      <i class="fas fa-user-circle text-indigo-400"></i>
      <span class="font-medium">Profile</span>
    </a>
  </nav>

  <!-- Footer Section -->
  <div class="border-t border-white/10 pt-5 mt-5">
    <div class="flex items-center gap-3 mb-3">
      <div id="sidebarAvatar"
           class="w-10 h-10 rounded-full bg-gradient-to-br from-indigo-600 to-purple-500 flex items-center justify-center text-white font-semibold text-sm shadow-md shadow-purple-500/20">
        S
      </div>
      <div>
        <p id="sidebarName" class="font-semibold text-white leading-tight">Loading...</p>
        <p class="text-xs text-white/50">Student</p>
      </div>
    </div>

    <div class="flex flex-col sm:flex-row gap-3 mt-4">
      <!-- Logout Button -->
      <button id="desktopLogout"
              class="w-full sm:w-auto bg-gradient-to-r from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 text-white font-medium py-2.5 px-6 rounded-xl transition-all shadow-md shadow-red-900/30 flex items-center justify-center gap-2 text-sm">
        <i class="fas fa-sign-out-alt"></i> Logout
      </button>

      <!-- Peek 2.0 Dashboard Button -->
      <a href="2.0 version dashboard.html"
         class="w-full sm:w-auto bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white font-medium py-2.5 px-6 rounded-xl transition-all shadow-md shadow-purple-900/30 flex items-center justify-center gap-2 text-sm">
        <i class="fas fa-tachometer-alt"></i> Peek 2.0 Dashboard
      </a>
    </div>
  </div>
</aside>


  <!-- Main Content -->
  <main class="lg:ml-72 p-4 lg:p-8 min-h-screen">

    <!-- Mobile Header -->
    <header class="lg:hidden flex justify-between items-center mb-6 glass p-4 rounded-xl border border-white/10">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-accent to-primary flex items-center justify-center">
          <i class="fas fa-graduation-cap text-white"></i>
        </div>
        <h1 class="text-lg font-bold text-white">GoTeach</h1>
      </div>
      <button id="openMobileMenu" class="text-2xl text-white/70 hover:text-white">Menu</button>
    </header>

    <!-- Dashboard -->
    <section id="dashboard" class="mb-10 relative z-20">
      <div class="glass p-6 lg:p-8 border border-white/10 relative overflow-visible rounded-2xl bg-white/5 shadow-xl">
        <!-- Bell Icon -->
        <div class="absolute top-6 right-6 z-50">
          <button id="notifyBtn"
                  class="relative bg-white/10 hover:bg-white/20 text-white p-3 rounded-full shadow-md transition duration-300">
            <i class="fas fa-bell text-xl"></i>
            <span id="bellDot" class="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full animate-pulse hidden"></span>
          </button>
          <!-- Notification Dropdown -->
          <div id="notificationDropdown"
               class="hidden absolute right-0 mt-3 w-72 bg-[#111]/95 backdrop-blur-lg border border-white/10 rounded-xl shadow-2xl overflow-hidden z-[9999]">
            <div class="p-3 border-b border-white/10 flex items-center justify-between">
              <h3 class="text-white font-semibold text-sm">Notifications</h3>
              <i class="fas fa-bell text-white/40"></i>
            </div>
            <ul id="notifList" class="max-h-56 overflow-y-auto text-sm text-white/80">
              <li class="px-4 py-3 hover:bg-white/10 cursor-pointer flex items-center gap-3 transition" id="godfreyNotif">
                <i class="fas fa-rocket text-purple-400 text-lg"></i>
                <span>Godfrey set to Launch GoTeach</span>
              </li>
            </ul>
            <div class="p-3 border-t border-white/10 text-center">
              <button id="viewAllBtn" class="text-indigo-400 hover:text-indigo-300 text-xs font-semibold">View all</button>
            </div>
          </div>
        </div>

        <!-- Dashboard Welcome -->
        <h1 class="text-3xl lg:text-4xl font-bold text-white mb-2">
          Welcome back, <span id="studentName" class="text-indigo-400">Student</span>!
        </h1>
        <p class="text-white/70">Let’s make today productive.</p>
      </div>

      <!-- Right Slide Notification Panel -->
      <div id="notifPanel" class="hidden fixed top-0 right-0 w-80 h-full bg-[#111]/95 border-l border-white/10 backdrop-blur-xl shadow-2xl transform translate-x-full transition-transform duration-300 z-[99999]">
        <div class="flex items-center justify-between p-4 border-b border-white/10">
          <h2 class="text-white text-lg font-semibold">All Notifications</h2>
          <button id="closePanel" class="text-white/70 hover:text-white"><i class="fas fa-times"></i></button>
        </div>
        <div id="notifPanelList" class="p-4 space-y-4">
          <div class="notification-item flex items-center gap-3 p-3 bg-white/5 hover:bg-white/10 rounded-lg cursor-pointer transition" id="openNotifDetail">
            <i class="fas fa-rocket text-purple-400 text-xl"></i>
            <div>
              <h4 class="font-semibold text-white text-sm">Godfrey set to Launch GoTeach</h4>
              <p class="text-xs text-white/50">Tap to read more</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Center Modal -->
      <div id="notifModal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[999999]">
        <div class="bg-[#121212] border border-white/10 p-6 rounded-2xl max-w-md text-center shadow-2xl">
          <i class="fas fa-rocket text-4xl text-purple-400 mb-3"></i>
          <h3 class="text-xl font-bold text-white mb-2">Godfrey set to Launch GoTeach</h3>
          <p class="text-white/70 text-sm mb-4">
            Exciting news! Godfrey University is preparing to officially launch the GoTeach platform — bringing innovation and learning together like never before.
          </p>
          <button id="closeModal" class="mt-2 bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded-xl transition">Close</button>
        </div>
      </div>
    </section>

    <!-- Stats -->
    <section class="grid grid-cols-2 lg:grid-cols-5 gap-4 mb-10">
      <div class="glass p-5 text-center border border-white/10 rounded-xl shadow-md hover:shadow-lg transition-all relative">
        <span class="absolute top-2 right-3 text-[10px] text-yellow-400 bg-yellow-400/10 px-2 py-[2px] rounded-full">Coming Soon</span>
        <i class="fas fa-book-open text-3xl text-accent mb-2"></i>
        <h3 class="text-2xl font-bold text-white" id="totalCourses">0</h3>
        <p class="text-xs text-muted">Enrolled Courses</p>
      </div>
      <div class="glass p-5 text-center border border-white/10 rounded-xl shadow-md hover:shadow-lg transition-all">
        <i class="fas fa-check-circle text-3xl text-green-400 mb-2"></i>
        <h3 class="text-2xl font-bold text-white" id="attendanceRate">0%</h3>
        <p class="text-xs text-muted">Attendance Rate</p>
      </div>
      <div class="glass p-5 text-center border border-white/10 rounded-xl shadow-md hover:shadow-lg transition-all">
        <i class="fas fa-tasks text-3xl text-yellow-400 mb-2"></i>
        <h3 class="text-2xl font-bold text-white" id="pendingTasks">0</h3>
        <p class="text-xs text-muted">Pending Tasks</p>
      </div>
      <div class="glass p-5 text-center border border-white/10 rounded-xl shadow-md hover:shadow-lg transition-all">
        <i class="fas fa-clock text-3xl text-primary mb-2"></i>
        <h3 class="text-2xl font-bold text-white" id="nextClassTime">08:30 AM</h3>
        <p class="text-xs text-muted">Next Class</p>
      </div>
      <div class="glass p-5 text-center border border-white/10 rounded-xl shadow-md hover:shadow-lg transition-all relative">
        <span class="absolute top-2 right-3 text-[10px] text-yellow-400 bg-yellow-400/10 px-2 py-[2px] rounded-full">Coming Soon</span>
        <i class="fas fa-user-graduate text-3xl text-blue-400 mb-2"></i>
        <h3 class="text-2xl font-bold text-white" id="totalStudents">0</h3>
        <p class="text-xs text-muted">Total Students</p>
      </div>
      <div class="glass p-5 text-center border border-white/10 rounded-xl shadow-md hover:shadow-lg transition-all">
        <i class="fas fa-signal text-3xl text-green-400 mb-2"></i>
        <h3 class="text-2xl font-bold text-white" id="studentsOnline">0</h3>
        <p class="text-xs text-muted">Students Online</p>
      </div>
      <div class="glass p-5 text-center border border-white/10 rounded-xl shadow-md hover:shadow-lg transition-all">
        <i class="fas fa-user-check text-3xl text-accent mb-2"></i>
        <h3 class="text-2xl font-bold text-white" id="activeAttendance">0</h3>
        <p class="text-xs text-muted">Active Attendance</p>
      </div>
      <div class="glass p-5 text-center border border-white/10 rounded-xl shadow-md hover:shadow-lg transition-all relative">
        <span class="absolute top-2 right-3 text-[10px] text-yellow-400 bg-yellow-400/10 px-2 py-[2px] rounded-full">Coming Soon</span>
        <i class="fas fa-medal text-3xl text-purple-400 mb-2"></i>
        <h3 class="text-2xl font-bold text-white" id="rank">—</h3>
        <p class="text-xs text-muted">Rank</p>
      </div>
      <div class="glass p-5 text-center border border-white/10 rounded-xl shadow-md hover:shadow-lg transition-all relative">
        <span id="notifDot" class="absolute top-2 right-3 w-3 h-3 bg-red-500 rounded-full shadow-md hidden"></span>
        <i class="fas fa-bell text-3xl text-pink-400 mb-2"></i>
        <h3 class="text-2xl font-bold text-white" id="notifications">1</h3>
        <p class="text-xs text-white/60">Notifications</p>
      </div>
    </section>

    <!-- Courses -->
    <section id="courses" class="mb-10">
      <div class="glass p-6 border border-white/10 rounded-xl shadow-md relative">
        <h2 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
          <i class="fas fa-book-open text-accent"></i> My Courses
        </h2>
        <div id="emptyCourses" class="flex flex-col items-center justify-center py-12 text-center">
          <div class="relative mb-4">
            <i class="fas fa-book text-7xl text-gray-700 drop-shadow-lg"></i>
            <div class="absolute inset-0 blur-3xl bg-blue-500/10 rounded-full animate-pulse"></div>
          </div>
          <p class="text-gray-300 font-semibold text-lg">No Courses Available</p>
          <p class="text-sm text-gray-500 mt-1">
            Your course list will appear here once it's synced with the university portal.
          </p>
          <p class="text-red-400 text-xs font-medium mt-6 italic border border-red-500/20 bg-red-500/10 px-4 py-2 rounded-lg">
            <i class="fas fa-exclamation-circle mr-2"></i>
            Course Auth from Portal hasn’t been deployed yet. Check back in the next update.
          </p>
        </div>
        <div id="coursesList" class="grid grid-cols-1 md:grid-cols-2 gap-4 hidden"></div>
      </div>
    </section>

    <!-- Attendance -->
    <section id="attendance" class="mb-10">
      <div class="glass p-6 border border-white/10 rounded-xl shadow-md relative overflow-hidden">
        <h2 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
          <i class="fas fa-clipboard-check text-green-400"></i> Submit Attendance
        </h2>
        <div class="bg-yellow-600/20 border border-yellow-600/40 text-yellow-400 p-4 rounded-lg mb-6">
          <p><i class="fas fa-info-circle mr-2"></i> Enter or select the code provided by your lecturer.</p>
        </div>
        <div class="flex gap-3 mb-6">
          <input type="text" id="attendanceCode" placeholder="Enter Code (e.g. GOU-ATT-12ABC)"
                 class="flex-1 p-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent">
          <button id="submitAttendance"
                  class="bg-gradient-to-r from-accent to-primary text-white px-6 py-3 rounded-lg font-semibold hover:scale-105 transition shadow-lg">
            Submit
          </button>
        </div>
        <div id="attendanceStatus" class="mt-2 text-sm"></div>

        <div class="border-t border-white/10 mt-6 pt-5">
          <h3 class="text-white/80 font-semibold text-base mb-3 flex items-center gap-2">
            <i class="fas fa-key text-accent"></i> Lecturer Deployed Codes
          </h3>
          <div id="deployedCodesList" class="space-y-3 max-h-60 overflow-y-auto pr-2 custom-scrollbar"></div>
          <div id="noDeployedCodes" class="text-center py-8 text-gray-500 text-sm">
            <i class="fas fa-info-circle mr-1"></i> No attendance codes have been deployed yet.
          </div>
        </div>
      </div>

      <!-- Generic Modal -->
      <div id="modalWrapper" class="hidden fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center z-50">
        <div class="bg-gray-800 border border-gray-700 rounded-2xl p-8 w-[90%] max-w-md text-center relative shadow-2xl animate-fadeIn">
          <button class="absolute top-4 right-4 text-gray-400 hover:text-white text-xl" onclick="closeModal()">
            <i class="fas fa-times"></i>
          </button>
          <div id="modalIcon" class="text-5xl mb-4"></div>
          <h3 id="modalTitle" class="text-xl font-bold text-white mb-2"></h3>
          <p id="modalMessage" class="text-gray-400 text-sm"></p>
        </div>
      </div>
    </section>

    <!-- Activity -->
    <section id="activity" class="mb-10">
      <div class="glass p-6 border border-white/10 rounded-xl shadow-md">
        <h2 class="text-xl font-bold text-white mb-6 flex items-center justify-center gap-2">
          <i class="fas fa-tasks text-accent"></i> Recent Activity
        </h2>
        <div class="flex justify-center gap-4 mb-6 border-b border-white/10 pb-2">
          <button class="activity-tab active-tab text-white font-medium px-4 py-2 rounded-lg hover:bg-accent/20 transition" data-tab="classWork">
            <i class="fas fa-book mr-1 text-accent"></i> Class Work
          </button>
          <button class="activity-tab text-white/70 font-medium px-4 py-2 rounded-lg hover:bg-accent/20 transition" data-tab="homeWork">
            <i class="fas fa-clipboard-list mr-1 text-accent"></i> Home Work
          </button>
          <button class="activity-tab text-white/70 font-medium px-4 py-2 rounded-lg hover:bg-accent/20 transition" data-tab="quickTest">
            <i class="fas fa-bolt mr-1 text-accent"></i> Quick Test
          </button>
        </div>

        <div id="classWork" class="activity-content">
          <div class="text-center py-10 text-gray-400">
            <i class="fas fa-book-open text-4xl text-accent mb-3"></i>
            <p class="text-lg font-semibold">No Class Work Yet</p>
            <p class="text-sm text-muted">Your lecturer hasn’t posted any class work yet.</p>
          </div>
        </div>
        <div id="homeWork" class="activity-content hidden">
          <div class="text-center py-10 text-gray-400">
            <i class="fas fa-file-alt text-4xl text-accent mb-3"></i>
            <p class="text-lg font-semibold">No Home Work Yet</p>
            <p class="text-sm text-muted">Your lecturer hasn’t posted any home work yet.</p>
          </div>
        </div>
        <div id="quickTest" class="activity-content hidden">
          <div class="text-center py-10 text-gray-400">
            <i class="fas fa-stopwatch text-4xl text-accent mb-3"></i>
            <p class="text-lg font-semibold">No Quick Test Set Yet</p>
            <p class="text-sm text-muted">Your lecturer hasn’t posted any quick test yet.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Analytics -->
    <section id="analytics" class="mb-10">
      <div class="glass p-6 border border-white/10 rounded-xl shadow-md">
        <h2 class="text-xl font-bold text-white mb-6 flex items-center gap-2 justify-center">
          <i class="fas fa-chart-line text-accent"></i> Analytics Overview
        </h2>
        <div class="flex flex-col lg:flex-row gap-6">
          <div class="flex-1 glass bg-white/5 p-6 rounded-xl border border-white/10 text-center">
            <h3 class="text-lg font-semibold text-white mb-4 flex items-center justify-center gap-2">
              <i class="fas fa-chart-bar text-green-400"></i> Attendance Analytics
            </h3>
            <canvas id="attendanceChart" class="chart-container"></canvas>
          </div>
          <div class="flex-1 glass bg-white/5 p-6 rounded-xl border border-white/10 text-center">
            <h3 class="text-lg font-semibold text-white mb-4 flex items-center justify-center gap-2">
              <i class="fas fa-user-friends text-blue-400"></i> Student Activity
            </h3>
            <div class="flex flex-col items-center justify-center py-10 text-gray-400">
              <i class="fas fa-users-slash text-5xl text-accent mb-3"></i>
              <p class="text-lg font-semibold">No Student Activity Yet</p>
              <p class="text-sm text-gray-500">No student activity has been recorded yet.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Premium -->
    <section id="premium" class="mb-10">
      <div class="glass p-6 border border-white/10 rounded-xl shadow-md text-center">
        <i class="fas fa-tags text-6xl text-gray-500 mb-4"></i>
        <h2 class="text-2xl font-bold text-white mb-2">No Pricing Yet</h2>
        <p class="text-muted mb-6 text-gray-400">
          Enjoy your <span class="text-accent font-semibold">free access</span> — premium features are coming soon.
        </p>
        <button disabled
                class="bg-gray-700/40 text-gray-400 px-8 py-3 rounded-xl font-bold cursor-not-allowed opacity-60 shadow-inner">
          <i class="fas fa-hourglass-half mr-2"></i> Coming Soon
        </button>
      </div>
    </section>

    <!-- Chat Room -->
    <section id="chat" class="mb-10 relative font-inter">
      <div class="glass p-6 border border-white/10 rounded-xl shadow-md h-[600px] flex flex-col relative overflow-hidden">
        <div class="flex justify-between items-center mb-4 border-b border-white/10 pb-3">
          <h2 class="text-xl font-bold text-white flex items-center gap-2">
            <i class="fas fa-comments text-accent"></i> Class Chat Room
          </h2>
          <div class="flex items-center gap-4 text-white text-lg">
            <button class="hover:text-accent transition"><i class="fas fa-phone"></i></button>
            <button class="hover:text-accent transition"><i class="fas fa-video"></i></button>
          </div>
        </div>
        <div id="chatMessages"
             class="flex-1 overflow-y-auto space-y-4 mb-4 pr-2 custom-scrollbar scroll-smooth relative">
          <p class="text-center text-muted py-8 text-gray-400">
            <i class="fas fa-comment-slash text-3xl mb-2 block"></i>
            No messages yet. Start the conversation!
          </p>
        </div>
        <div class="flex items-center gap-2 border-t border-white/10 pt-3">
          <button id="recordBtn"
                  class="p-3 bg-gradient-to-r from-blue-600/80 to-blue-800/80 hover:from-blue-500 hover:to-blue-700 rounded-lg text-white text-lg transition">
            <i class="fas fa-microphone"></i>
          </button>
          <button id="attachBtn"
                  class="p-3 bg-gradient-to-r from-gray-700 to-gray-800 hover:from-gray-600 hover:to-gray-700 rounded-lg text-white text-lg transition">
            <i class="fas fa-plus"></i>
          </button>
          <input type="text" id="chatInput" placeholder="Type a message..."
                 class="flex-1 p-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent text-sm">
          <button id="sendMessage"
                  class="bg-gradient-to-r from-accent to-primary text-white px-4 py-3 rounded-lg font-semibold hover:scale-105 transition shadow-lg flex items-center justify-center text-lg">
            <i class="fas fa-paper-plane"></i>
          </button>
        </div>
      </div>
      <div id="messageMenu"
           class="hidden absolute bg-[#1f2937] border border-gray-700 rounded-lg shadow-lg text-white text-sm w-44 z-40 transition-all duration-200">
        <ul class="flex flex-col">
          <li class="menu-item hover:bg-gray-700 px-4 py-2 cursor-pointer flex items-center gap-2"><i class="fas fa-edit text-yellow-400"></i> Edit</li>
          <li class="menu-item hover:bg-gray-700 px-4 py-2 cursor-pointer flex items-center gap-2"><i class="fas fa-thumbtack text-blue-400"></i> Pin</li>
          <li class="menu-item hover:bg-gray-700 px-4 py-2 cursor-pointer flex items-center gap-2"><i class="fas fa-reply text-green-400"></i> Reply</li>
          <li class="menu-item hover:bg-gray-700 px-4 py-2 cursor-pointer flex items-center gap-2 text-red-400"><i class="fas fa-trash"></i> Delete</li>
        </ul>
      </div>
    </section>

    <!-- Profile -->
    <section id="profile" class="mb-10">
      <div class="glass p-8 border border-white/10 rounded-xl shadow-md">
        <div class="flex items-center justify-between mb-6">
          <h2 class="text-2xl font-bold text-white flex items-center gap-3">
            <i class="fas fa-user text-accent"></i> Profile
          </h2>
          <button id="editProfileBtn" class="text-sm text-blue-400 hover:text-blue-300 font-semibold transition">
            <i class="fas fa-edit mr-1"></i> Edit
          </button>
        </div>
        <div class="flex flex-col sm:flex-row items-center gap-8">
          <div class="relative group">
            <div id="profilePic" class="w-28 h-28 rounded-full overflow-hidden border-4 border-accent/50 shadow-xl bg-gray-800 flex items-center justify-center">
              <span id="profileInitial" class="text-4xl font-bold text-white">S</span>
            </div>
          </div>
          <div class="text-center sm:text-left flex-1">
            <h3 id="profileName" class="text-xl font-bold text-white mb-1">Loading...</h3>
            <p id="profileEmail" class="text-muted text-sm mb-3">student@gouni.edu.ng</p>
            <div class="flex flex-wrap gap-2 justify-center sm:justify-start">
              <span class="px-3 py-1 bg-accent/20 text-accent text-xs font-semibold rounded-full">Student</span>
              <span id="profileReg" class="px-3 py-1 bg-primary/20 text-primary text-xs font-semibold rounded-full">GOU-2025-XXXX</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Profile Edit Modal -->
    <div id="profileModal" class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50">
      <div class="bg-gray-900 p-6 rounded-xl w-96 relative">
        <h3 class="text-xl font-bold text-white mb-4">Edit Profile</h3>
        <label class="block mb-2 text-white font-semibold">Name</label>
        <input type="text" id="modalName" class="w-full p-2 rounded-lg bg-gray-800 text-white mb-3">
        <label class="block mb-2 text-white font-semibold">Email</label>
        <input type="email" id="modalEmail" class="w-full p-2 rounded-lg bg-gray-800 text-white mb-3">
        <label class="block mb-2 text-white font-semibold">Profile Picture</label>
        <input type="file" id="modalPic" accept="image/*" class="w-full mb-3">
        <label class="block mb-2 text-white font-semibold">Registration ID</label>
        <input type="text" id="modalReg" class="w-full p-2 rounded-lg bg-gray-800 text-white mb-4">
        <div class="flex justify-end gap-2">
          <button id="closeProfileModal" class="px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition">Cancel</button>
          <button id="saveProfileBtn" class="px-4 py-2 bg-accent text-white rounded-lg hover:bg-accent/80 transition">Save</button>
        </div>
      </div>
    </div>

  </main>

  <!-- Firebase + Core Logic -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.2/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.14.2/firebase-auth.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.14.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDtTYEHEdPopiYv9Iq2XYAcXTKk3gzWL_A",
      authDomain: "goteach-1eaa3.firebaseapp.com",
      projectId: "goteach-1eaa3",
      storageBucket: "goteach-1eaa3.appspot.com",
      messagingSenderId: "486448948939",
      appId: "1:486448948939:web:3058788ea1a134804d1d4e"
    };
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    const studentName = document.getElementById('studentName');
    const totalCourses = document.getElementById('totalCourses');
    const attendanceRate = document.getElementById('attendanceRate');
    const pendingTasks = document.getElementById('pendingTasks');
    const coursesList = document.getElementById('coursesList');
    const profileName = document.getElementById('profileName');
    const profileEmail = document.getElementById('profileEmail');
    const profileReg = document.getElementById('profileReg');
    const profileInitial = document.getElementById('profileInitial');
    const sidebarName = document.getElementById('sidebarName');
    const sidebarAvatar = document.getElementById('sidebarAvatar');

    let chart = null;

    // Mobile menu
    document.getElementById('openMobileMenu')?.addEventListener('click', () => {
      document.getElementById('mobileMenu').classList.add('open');
      document.getElementById('mobileOverlay').classList.remove('hidden');
    });
    document.getElementById('closeMobileMenu')?.addEventListener('click', closeMenu);
    document.getElementById('mobileOverlay')?.addEventListener('click', closeMenu);
    function closeMenu() {
      document.getElementById('mobileMenu').classList.remove('open');
      document.getElementById('mobileOverlay').classList.add('hidden');
    }

    // Sidebar active link
    document.querySelectorAll('.sidebar-link').forEach(l => {
      l.addEventListener('click', () => {
        document.querySelectorAll('.sidebar-link').forEach(x => x.classList.remove('active'));
        l.classList.add('active');
        closeMenu();
      });
    });

    // Logout
    document.getElementById('desktopLogout')?.addEventListener('click', logout);
    document.getElementById('mobileLogout')?.addEventListener('click', logout);
    async function logout() { await signOut(auth); window.location.href = 'index.html'; }

    // Auth state
    onAuthStateChanged(auth, async user => {
      if (!user) { window.location.href = 'index.html'; return; }
      const snap = await getDoc(doc(db, 'users', user.uid));
      if (!snap.exists() || snap.data().role !== 'student') { alert('Access denied.'); logout(); return; }
      const d = snap.data();
      const full = `${d.firstName} ${d.lastName}`;
      const ini = d.firstName[0].toUpperCase();

      studentName.textContent = d.firstName;
      profileName.textContent = full;
      profileEmail.textContent = d.email;
      profileReg.textContent = d.regNumber || 'N/A';
      profileInitial.textContent = ini;
      sidebarName.textContent = d.firstName;
      sidebarAvatar.textContent = ini;

      loadDashboardData();
    });

    function loadDashboardData() {
      totalCourses.textContent = 5;
      attendanceRate.textContent = '92%';
      pendingTasks.textContent = 3;

      const sampleCourses = [
        { name: "Data Structures", lecturer: "Dr. Okoye", progress: 78 },
        { name: "Web Development", lecturer: "Prof. Eze", progress: 65 },
        { name: "Database Systems", lecturer: "Mr. Chukwu", progress: 90 },
      ];
      coursesList.innerHTML = sampleCourses.map(c => `
        <div class="glass p-4 rounded-xl border border-white/10">
          <h3 class="font-bold text-white">${c.name}</h3>
          <p class="text-xs text-muted">${c.lecturer}</p>
          <div class="mt-3 bg-white/10 rounded-full h-2">
            <div class="bg-gradient-to-r from-accent to-primary h-full rounded-full" style="width:${c.progress}%"></div>
          </div>
          <p class="text-xs text-muted mt-1">${c.progress}% Complete</p>
        </div>`).join('');
      document.getElementById('emptyCourses').classList.add('hidden');
      coursesList.classList.remove('hidden');

      if (chart) chart.destroy();
      chart = new Chart(document.getElementById('attendanceChart'), {
        type: 'line',
        data: {
          labels: ['Mon','Tue','Wed','Thu','Fri'],
          datasets: [{ label:'Attendance', data:[100,95,90,100,92],
            borderColor:'#3b82f6', backgroundColor:'rgba(59,130,246,0.1)', tension:0.4, fill:true }]
        },
        options: { responsive:true, plugins:{legend:{display:false}},
          scales:{ y:{beginAtZero:true, max:100} } }
      });
    }
  </script>

  <!-- Attendance Logic -->
  <script>
    const deployedList = document.getElementById('deployedCodesList');
    const noDeployedCodes = document.getElementById('noDeployedCodes');
    const submitBtn = document.getElementById('submitAttendance');
    const codeInput = document.getElementById('attendanceCode');
    const modalWrapper = document.getElementById('modalWrapper');
    const modalIcon = document.getElementById('modalIcon');
    const modalTitle = document.getElementById('modalTitle');
    const modalMessage = document.getElementById('modalMessage');

    let usedCodes = JSON.parse(localStorage.getItem('used_attendance_codes') || '[]');
    let deployedCodes = JSON.parse(localStorage.getItem('attendance_deployments') || '[]');

    function showModal(type, title, msg) {
      const icons = { success:'<i class="fas fa-check-circle text-green-500"></i>',
        warning:'<i class="fas fa-exclamation-circle text-yellow-500"></i>',
        error:'<i class="fas fa-times-circle text-red-500"></i>' };
      modalIcon.innerHTML = icons[type] || icons.warning;
      modalTitle.textContent = title;
      modalMessage.textContent = msg;
      modalWrapper.classList.remove('hidden');
    }
    function closeModal() { modalWrapper.classList.add('hidden'); }

    function renderDeployedCodes() {
      deployedList.innerHTML = '';
      if (!deployedCodes.length) { noDeployedCodes.classList.remove('hidden'); return; }
      noDeployedCodes.classList.add('hidden');
      deployedCodes.forEach(c => {
        const card = document.createElement('div');
        card.className = `glass border border-gray-700 rounded-xl p-4 flex justify-between items-center transition ${c.active?'opacity-100':'opacity-50 grayscale'}`;
        card.innerHTML = `
          <div><h4 class="text-white font-semibold">${c.code}</h4>
          <p class="text-xs text-gray-400">${c.date}</p></div>
          <button class="copyCode bg-accent/20 hover:bg-accent/40 text-accent px-3 py-1 rounded-lg text-xs font-medium" ${c.active?'':'disabled'}>
            <i class="fas fa-copy"></i> Copy
          </button>`;
        if (c.active) {
          card.querySelector('.copyCode').addEventListener('click', () => {
            navigator.clipboard.writeText(c.code);
            codeInput.value = c.code; codeInput.focus();
            showModal('success','Code Copied',`Code ${c.code} copied to clipboard.`);
          });
        }
        deployedList.appendChild(card);
      });
    }

    submitBtn.addEventListener('click', () => {
      const entered = codeInput.value.trim().toUpperCase();
      if (!entered) return showModal('warning','Empty Field','Enter a valid code.');
      if (usedCodes.includes(entered)) return showModal('warning','Already Marked','You have already used this code.');
      const valid = deployedCodes.some(c => c.code===entered && c.active);
      if (!valid) return showModal('error','Invalid Code','Code is invalid or inactive.');
      usedCodes.push(entered);
      localStorage.setItem('used_attendance_codes', JSON.stringify(usedCodes));
      showModal('success','Attendance Marked','Your attendance has been recorded.');
      codeInput.value = '';
    });

    renderDeployedCodes();
  </script>

  <!-- Activity Tabs -->
  <script>
    document.querySelectorAll('.activity-tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.activity-tab').forEach(t => {
          t.classList.remove('active-tab','text-white');
          t.classList.add('text-white/70');
        });
        tab.classList.add('active-tab','text-white');
        document.querySelectorAll('.activity-content').forEach(c => {
          c.classList.toggle('hidden', c.id !== tab.dataset.tab);
        });
      });
    });
  </script>

  <!-- Chat Room -->
  <script>
    const chatInput = document.getElementById('chatInput');
    const sendMessageBtn = document.getElementById('sendMessage');
    const chatMessages = document.getElementById('chatMessages');
    const menu = document.getElementById('messageMenu');
    const recordBtn = document.getElementById('recordBtn');
    let mediaRecorder, audioChunks = [], activeMessage = null;

    sendMessageBtn.addEventListener('click', sendChatMessage);
    chatInput.addEventListener('keypress', e => { if (e.key==='Enter') sendChatMessage(); });

    function sendChatMessage() {
      const txt = chatInput.value.trim();
      if (!txt) return;
      createMessageBubble(txt, 'me');
      chatInput.value = '';
    }

    function createMessageBubble(content, sender, isAudio = false) {
      const bubble = document.createElement('div');
      const now = new Date();
      const time = now.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
      bubble.className = `relative chat-bubble ${sender}`;
      bubble.dataset.pinned = "false";
      bubble.dataset.sender = sender;
      bubble.innerHTML = isAudio ?
        `<audio controls class="w-full rounded-lg mt-1"><source src="${content}" type="audio/webm"></audio>
         <span class="chat-time">${time}</span><i class="fas fa-ellipsis-v message-menu-btn"></i>` :
        `<p class="message-text">${content}</p>
         <span class="chat-time">${time}</span><i class="fas fa-ellipsis-v message-menu-btn"></i>`;
      const dots = bubble.querySelector('.message-menu-btn');
      dots.addEventListener('click', e => { e.stopPropagation(); activeMessage = bubble; openMenu(e, bubble, sender==='me'); });
      chatMessages.appendChild(bubble);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function openMenu(e, bubble, isOwner) {
      const rect = bubble.getBoundingClientRect();
      const container = chatMessages.getBoundingClientRect();
      menu.classList.remove('hidden');
      menu.style.top = (rect.bottom - container.top + chatMessages.scrollTop) + 'px';
      menu.style.left = (rect.left - container.left + 40) + 'px';
      const [edit, pin, reply, del] = menu.querySelectorAll('.menu-item');
      edit.style.display = isOwner ? 'flex' : 'none';
      edit.onclick = () => editMessage(activeMessage);
      del.onclick = () => deleteMessage(activeMessage);
      reply.onclick = () => replyToMessage(activeMessage);
      pin.onclick = () => pinMessage(activeMessage);
    }
    chatMessages.addEventListener('click', () => menu.classList.add('hidden'));

    function editMessage(msg) {
      menu.classList.add('hidden');
      const txt = msg.querySelector('.message-text');
      if (!txt) return showInlineAlert("Cannot edit voice messages.");
      const input = document.createElement('input');
      input.type = 'text'; input.value = txt.textContent;
      input.className = "w-full bg-white/10 border border-white/20 text-white rounded-md px-2 py-1 text-sm mt-1";
      msg.replaceChild(input, txt);
      input.focus();
      input.addEventListener('keypress', ev => {
        if (ev.key === 'Enter' && input.value.trim()) {
          const p = document.createElement('p');
          p.textContent = input.value.trim(); p.className = "message-text";
          msg.replaceChild(p, input);
          showInlineAlert("Message edited.");
        }
      });
    }

    function deleteMessage(msg) { menu.classList.add('hidden'); msg.classList.add('opacity-50'); setTimeout(() => msg.remove(), 300); showInlineAlert("Message deleted."); }
    function replyToMessage(msg) {
      menu.classList.add('hidden');
      const txt = msg.querySelector('.message-text')?.textContent || "Voice message";
      const box = document.createElement('div');
      box.className = "bg-white/10 text-white text-sm p-2 rounded-md border-l-4 border-accent mb-2";
      box.textContent = `Replying to: ${txt}`;
      chatInput.parentElement.insertBefore(box, chatInput);
      chatInput.focus();
      const handler = e => { if (e.key==='Enter') { createMessageBubble(`Reply to "${txt}": ${chatInput.value.trim()}`, 'me'); box.remove(); chatInput.removeEventListener('keydown', handler); chatInput.value=''; showInlineAlert("Reply sent."); }};
      chatInput.addEventListener('keydown', handler);
    }
    function pinMessage(msg) {
      menu.classList.add('hidden');
      const pinned = msg.dataset.pinned === "true";
      msg.dataset.pinned = !pinned;
      if (!pinned) { msg.style.border = "1px solid gold"; msg.style.order = "-1"; showInlineAlert("Message pinned."); }
      else { msg.style.border = ""; msg.style.order = "initial"; showInlineAlert("Message unpinned."); }
    }

    recordBtn.addEventListener('click', async () => {
      if (mediaRecorder && mediaRecorder.state === 'recording') { mediaRecorder.stop(); recordBtn.innerHTML = '<i class="fas fa-microphone"></i>'; recordBtn.classList.remove('bg-red-600'); return; }
      try {
        const stream = await navigator.mediaDevices.getUserMedia({audio:true});
        mediaRecorder = new MediaRecorder(stream);
        audioChunks = [];
        mediaRecorder.ondataavailable = e => audioChunks.push(e.data);
        mediaRecorder.onstop = () => {
          const blob = new Blob(audioChunks, {type:'audio/webm'});
          createMessageBubble(URL.createObjectURL(blob), 'me', true);
        };
        mediaRecorder.start();
        recordBtn.innerHTML = '<i class="fas fa-stop"></i>';
        recordBtn.classList.add('bg-red-600');
      } catch { showInlineAlert('Microphone access denied.'); }
    });

    function showInlineAlert(txt) {
      const div = document.createElement('div');
      div.className = "bg-accent/10 text-accent border border-accent/40 text-sm px-4 py-2 rounded-lg text-center mt-3";
      div.textContent = txt;
      chatMessages.appendChild(div);
      chatMessages.scrollTop = chatMessages.scrollHeight;
      setTimeout(() => div.remove(), 3000);
    }
  </script>

  <!-- Profile Edit -->
  <script>
    const editBtn = document.getElementById('editProfileBtn');
    const modal = document.getElementById('profileModal');
    const closeModalBtn = document.getElementById('closeProfileModal');
    const saveBtn = document.getElementById('saveProfileBtn');

    editBtn.addEventListener('click', () => {
      document.getElementById('modalName').value = profileName.textContent;
      document.getElementById('modalEmail').value = profileEmail.textContent;
      document.getElementById('modalReg').value = profileReg.textContent;
      modal.classList.remove('hidden');
    });
    closeModalBtn.addEventListener('click', () => modal.classList.add('hidden'));
    saveBtn.addEventListener('click', () => {
      profileName.textContent = document.getElementById('modalName').value || "Unnamed";
      profileEmail.textContent = document.getElementById('modalEmail').value || "email@gouni.edu.ng";
      profileReg.textContent = document.getElementById('modalReg').value || "GOU-2025-XXXX";
      profileInitial.textContent = profileName.textContent.charAt(0).toUpperCase() || "S";
      const file = document.getElementById('modalPic').files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = e => { document.getElementById('profilePic').innerHTML = `<img src="${e.target.result}" class="w-full h-full object-cover rounded-full">`; };
        reader.readAsDataURL(file);
      }
      modal.classList.add('hidden');
    });
  </script>

  <!-- Notification System -->
  <script>
    const notifyBtn = document.getElementById('notifyBtn');
    const dropdown = document.getElementById('notificationDropdown');
    const notifList = document.getElementById('notifList');
    const notifPanelList = document.getElementById('notifPanelList');
    const bellDot = document.getElementById('bellDot');
    const viewAllBtn = document.getElementById('viewAllBtn');
    const notifPanel = document.getElementById('notifPanel');
    const closePanel = document.getElementById('closePanel');
    const notifModal = document.getElementById('notifModal');
    const closeModalNotif = document.getElementById('closeModal');
    const openNotifDetail = document.getElementById('openNotifDetail');
    let count = 1;

    notifyBtn.addEventListener('click', e => { e.stopPropagation(); dropdown.classList.toggle('hidden'); });
    document.addEventListener('click', e => { if (!notifyBtn.contains(e.target) && !dropdown.contains(e.target)) dropdown.classList.add('hidden'); });

    viewAllBtn.addEventListener('click', () => { dropdown.classList.add('hidden'); notifPanel.classList.remove('hidden'); setTimeout(() => notifPanel.classList.remove('translate-x-full'), 10); });
    closePanel.addEventListener('click', () => { notifPanel.classList.add('translate-x-full'); setTimeout(() => notifPanel.classList.add('hidden'), 300); });
    openNotifDetail.addEventListener('click', () => notifModal.classList.remove('hidden'));
    closeModalNotif.addEventListener('click', () => notifModal.classList.add('hidden'));

    function addNotification(title, icon = "fa-bell", color = "text-blue-400") {
      count++; document.getElementById('notifications').textContent = count;
      bellDot.classList.remove('hidden');
      const li = document.createElement('li');
      li.className = "px-4 py-3 hover:bg-white/10 cursor-pointer flex items-center gap-3 transition";
      li.innerHTML = `<i class="fas ${icon} ${color} text-lg"></i><span>${title}</span>`;
      notifList.prepend(li);
      const div = document.createElement('div');
      div.className = "notification-item flex items-center gap-3 p-3 bg-white/5 hover:bg-white/10 rounded-lg cursor-pointer transition";
      div.innerHTML = `<i class="fas ${icon} ${color} text-xl"></i><div><h4 class="font-semibold text-white text-sm">${title}</h4><p class="text-xs text-white/50">Tap to read more</p></div>`;
      notifPanelList.prepend(div);
    }

    setTimeout(() => addNotification("New course materials available", "fa-book-open", "text-green-400"), 5000);
  </script>

</body>
</html>
